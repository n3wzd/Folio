# COVID-19 백신접종예약

---

2021-09 ~ 2021-12 (4인)

## 배경
백신 접종 예약 프로젝트는 사용자 주소를 기반으로 병원과 잔여 백신 정보를 제공하여 접근성을 향상하는 것을 목적으로 합니다. 또한, 코로나19 백신 접종 완료자 및 접종 현황 등 팬데믹 상황에서 유용한 정보를 제공합니다.

4인 프로젝트로 진행되었으며, 제가 담당한 부분은 DB 및 백엔드 서버 개발입니다.

## 기능
- 회원가입, 로그인
- 아이디 / 비밀번호 찾기
- 마이페이지: 회원정보 조회, 회원정보 수정, 예약 내역 조회
- 잔여백신 조회: 사용자의 집 주소 기준, 백신별 주변 병원 조회
- 백신 예약, 예약 변경, 예약 취소
- 간편조회: 예약 번호만으로 본인의 예약 현황 확인 가능

## 스택
- **HTML, CSS, Javascript**
- **React**
- **Node.js**
- **Express.js**
- **MySQL**

## 문제 및 해결
### body-parser
클라이언트에서 서버로 데이터를 전송할 때, `req.body`에서 전송된 데이터를 읽을 수 없었습니다. body-parser 모듈을 사용하지 않으면 `req.body`가 `undefined`로 처리되는 문제가 발생합니다.  

Express 서버에서 `body-parser` 모듈을 사용하여 `req.body` 데이터를 파싱하도록 설정하면 문제를 해결할 수 있습니다. 이 모듈은 클라이언트가 보낸 데이터를 올바르게 파싱해 서버에서 처리할 수 있게 해줍니다. 

이제 서버는 클라이언트 요청에서 `req.body`의 데이터를 올바르게 받아 처리할 수 있습니다. 데이터를 주고받는 기능이 정상적으로 작동하였습니다.

### CORS 정책 위반
클라이언트와 서버 간의 데이터 통신 시, CORS 정책 위반으로 인해 브라우저에서 요청이 차단되는 문제가 있었습니다. 

`http-proxy-middleware`와 `cors` 모듈을 도입하여 서버 측에서 CORS 정책을 허용하도록 설정했습니다. 이를 통해 클라이언트에서 서버로의 요청을 우회하고, 필요한 데이터를 안전하게 주고받을 수 있었습니다.  

CORS 문제를 해결한 후, 클라이언트와 서버 간의 데이터 전송이 원활하게 이루어지며, 더 이상 브라우저에서 요청이 차단되지 않았습니다.

### mysql2
MySQL을 사용하여 데이터베이스와 연동할 때, 비동기 처리를 효율적으로 관리하기 어려웠습니다. `mysql` 모듈로는 비동기 작업의 실행 순서를 제어하는 데 한계가 있었습니다.

`mysql2` 모듈을 사용하여 SQL 문의 실행을 비동기 방식으로 제어할 수 있도록 했습니다. 이 모듈은 `async`/`await`를 지원하여 비동기 작업의 순서를 이전보다 쉽게 관리할 수 있었습니다. 

데이터베이스 연동 작업이 안정적으로 처리되었으며, 비동기 작업이 원하는 순서대로 수행되어 코드 생산성 및 데이터 처리 효율성이 향상되었습니다.

### jsonwebtoken
사용자 인증을 위해 JWT(JSON Web Token) 방식을 적용하고자 했으나, 이를 구현하는 데 어려움이 있었습니다.

`jsonwebtoken` 모듈을 사용하여 JWT 토큰을 생성하고, 이를 통해 사용자 인증 및 권한 부여 기능을 구현했습니다. 서버에서는 클라이언트로부터 전달받은 토큰을 검증하고 필요한 데이터를 처리할 수 있도록 했습니다.

이 모듈을 활용하여 사용자 인증이 JWT 기반으로 원활하게 이루어졌으며, 보안성과 효율성을 동시에 확보할 수 있었습니다.
